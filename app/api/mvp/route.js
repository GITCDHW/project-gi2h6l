import { getAiResponse, assertSafe, createBudget } from '@/libs/giga';\n\nexport async function POST(req) {\n  const body = await req.json();\n\n  assertSafe(!!body.portfolioRequirements, "Missing portfolioRequirements");\n\n  const budget = createBudget({ maxCalls: 1, maxChars: 10000 });\n\n  const aiPrompt = `Generate a complete, production-ready Next.js (App Router) personal portfolio website source code. The website should have a minimal and calm overall vibe, using light or neutral colors and a centered or single-column layout. Prioritize clarity and trust in the design, adopting a conservative confidence level. Avoid flashy animations, gradients, or complex UI patterns. Return the entire source code as a single string under the key 'generatedCode'.\n\nDetailed requirements:\n${body.portfolioRequirements}`;\n\n  const ai = await getAiResponse({ prompt: aiPrompt, json: true });\n\n  budget.track(JSON.stringify(ai));\n\n  assertSafe(!!ai.generatedCode, "AI response missing 'generatedCode' field.");\n\n  return Response.json(ai);\n}